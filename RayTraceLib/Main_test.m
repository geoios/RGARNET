close all; clear; clc;close("all");
%% 声线跟踪检验
PF(:,1)=[0.0,10.0,20.0,30.0,40.0,50.0,60.0,70.0,80.0,90.0,100.0,110.0,120.0,130.0,140.0,150.0,160.0,170.0,180.0,190.0,200.0,...
    250.0,300.0,350.0,400.0,450.0,500.0,550.0,600.0,700.0,800.0,900.0,1200.0,1727.8];
PF(:,2) = [1501.347,1496.773,1488.557,1485.143,1478.704,1469.721,1466.675,1468.32,1470.861,1470.605,1468.241,1465.193,1464.158,1463.872,1463.139,1463.938,...
1464.58,1464.23,1464.726,1465.433,1465.654,1465.035,1463.518,1465.091,1468.088,1469.348,1470.695,1471.572,1472.629,1474.556,1475.997,1477.36,1478.699,1485.261,];

SurFaceP = [-61.78987041,1563.71841842,-8.32161706];SeafloorP = [-4.153,898.138,-1659.411];
PF = PFGrad(PF,2,1);

[T1,Y,Z,L,~,Iteration,RayInf]= P2PInvRayTrace(SurFaceP,SeafloorP,PF);

YY = norm(SurFaceP(1:2)-SeafloorP(1:2));
% [theta,T2]=calc_ray_path(YY,-SeafloorP(3),-SurFaceP(3),Data.PF(:,1),Data.PF(:,2),size(Data.PF,1));


[theta,T2]=calc_ray_path(668.0713301840847,1659.411,8.32161706,PF(:,1),PF(:,2),size(PF,1));


T1-T2
% [T,Y,Z,L] = RayTracing( PF, 87/180*pi, +inf,+inf,3000);
% Y
[] = PP2T()

